var TcHmi;!function(TcHmi){!function(Controls){!function(BaseTemplate){class TcHmiBreadcrumb extends TcHmi.Controls.System.TcHmiControl{constructor(element,pcElement,attrs){super(element,pcElement,attrs),this.__breadcrumbData=[],this.__buttonPressed=null,this.__callback=function(content){},this.__breadcrumbEvents=[],this.__onBreadcrumbButtonDown=e=>{const element=this.__breadcrumbData.find((item=>item.button===e.target));element&&element.button&&(element.button.classList.add("down"),element.button.addEventListener("pointerleave",this.__onBreadcrumbButtonLeave),element.button.addEventListener("pointerenter",this.__onBreadcrumbButtonEnter),element.button.addEventListener("pointerup",this.__onBreadcrumbButtonUp,{once:!0}),this.__buttonPressed=element,document.addEventListener("pointerup",(()=>{this.__buttonPressed?.button&&(this.__buttonPressed.button.classList.remove("down"),this.__buttonPressed.button.removeEventListener("pointerleave",this.__onBreadcrumbButtonLeave),this.__buttonPressed.button.removeEventListener("pointerenter",this.__onBreadcrumbButtonEnter),this.__buttonPressed.button.removeEventListener("pointerup",this.__onBreadcrumbButtonUp),this.__buttonPressed=null)}),{once:!0}))},this.__onBreadcrumbButtonUp=e=>{const element=this.__breadcrumbData.find((item=>item.button===e.target));element?.button&&element===this.__buttonPressed&&(element.button.classList.remove("down"),element.button.removeEventListener("pointerleave",this.__onBreadcrumbButtonLeave),element.button.removeEventListener("pointerenter",this.__onBreadcrumbButtonEnter),element.button.removeEventListener("pointerup",this.__onBreadcrumbButtonUp),this.__callback&&this.__callback(element.content),this.__buttonPressed=null)},this.__onBreadcrumbButtonLeave=e=>{if(!this.__buttonPressed)return;const element=this.__breadcrumbData.find((item=>item.button===e.target));element?.button&&element===this.__buttonPressed&&element.button.classList.remove("down")},this.__onBreadcrumbButtonEnter=e=>{if(!this.__buttonPressed)return;const element=this.__breadcrumbData.find((item=>item.button===e.target));element?.button&&element===this.__buttonPressed&&element.button.classList.add("down")},this.__onResolverForTextColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("textColor"),tchmi_equal(data.value,this.__textColor)||(this.__textColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextColor"}),this.__processTextColor())}}__previnit(){if(this.__elementTemplateRoot=this.__element[0].getElementsByClassName("TcHmi_Controls_BaseTemplate_TcHmiBreadcrumb-Template")[0],!this.__elementTemplateRoot)throw new Error("Invalid Template.html");super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),this.__breadcrumbData&&this.__createBreadcrumb(),this.__resizeEventDestroyer=TcHmi.EventProvider.register(this.__id+".onResized",this.__onResized())}__detach(){super.__detach(),this.__resizeEventDestroyer&&(this.__resizeEventDestroyer(),this.__resizeEventDestroyer=void 0)}destroy(){this.__keepAlive||(this.__resetTcHmiBreadcrumb(),super.destroy())}setBreadcrumbData(valueNew,callback){this.__resetTcHmiBreadcrumb(),this.__breadcrumbData=valueNew,this.__callback=callback,this.__isAttached&&this.__createBreadcrumb()}__createBreadcrumb(){let width=0;for(let e of this.__breadcrumbData)this.__createTcHmiBreadcrumbButton(e,!1),e.button&&(width+=e.button.getBoundingClientRect().width);width>this.__element[0].clientWidth&&(this.__resetTcHmiBreadcrumb(),this.__createTcHmiBreadcrumbButton(this.__breadcrumbData[this.__breadcrumbData.length-2],!0))}__createTcHmiBreadcrumbButton(element,backwards){element.button&&(element.button.remove(),element.button=void 0),element.button=document.createElement("div"),element.button.classList.add("TcHmi_Controls_BaseTemplate_TcHmiBreadcrumb-button");const span=document.createElement("span");span.textContent=element.name,element.button.appendChild(span),this.__elementTemplateRoot.append(element.button);let addEvents=!1;element===this.__breadcrumbData[this.__breadcrumbData.length-1]||backwards?backwards?(element.button.classList.add("arrow-backwards"),addEvents=!0):element.button.classList.add("active"):(element.button.classList.add("arrow"),addEvents=!0),addEvents&&element.button.addEventListener("pointerdown",this.__onBreadcrumbButtonDown)}__resetTcHmiBreadcrumb(){this.__elementTemplateRoot.textContent="";for(const element of this.__breadcrumbData)element.button&&(element.button.removeEventListener("pointerdown",this.__onBreadcrumbButtonDown),element.button.removeEventListener("pointerup",this.__onBreadcrumbButtonUp),element.button.removeEventListener("pointerleave",this.__onBreadcrumbButtonLeave),element.button.removeEventListener("pointerenter",this.__onBreadcrumbButtonEnter));this.__breadcrumbData=[]}__onResized(){return event=>{let height=this.getRenderedHeight();height&&(this.__borderWidth&&this.__borderStyle&&("None"!==this.__borderStyle.top&&(height-=this.__borderWidth.top),"None"!==this.__borderStyle.bottom&&(height-=this.__borderWidth.bottom)),this.__element[0].style.setProperty("--tchmi-icon-size",height+"px"))}}setTextFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontSize")),convertedValue!==this.__textFontSize&&(this.__textFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontSize"}),this.__processTextFontSize())}getTextFontSize(){return this.__textFontSize}__processTextFontSize(){TcHmi.StyleProvider.processFontSize(this.__element,this.__textFontSize,this.__textFontSizeUnit)}setTextFontSizeUnit(valueNew){let convertedValue=TcHmi.ValueConverter.toFontSizeUnit(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextFontSizeUnit")),convertedValue!==this.__textFontSizeUnit&&(this.__textFontSizeUnit=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TextFontSizeUnit"}),this.__processTextFontSizeUnit())}getTextFontSizeUnit(){return this.__textFontSizeUnit}__processTextFontSizeUnit(){TcHmi.StyleProvider.processFontSize(this.__element,this.__textFontSize,this.__textFontSizeUnit)}setTextColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TextColor"));let resolverInfo=this.__objectResolvers.get("textColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue,this);this.__objectResolvers.set("textColor",{resolver:resolver,watchCallback:this.__onResolverForTextColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForTextColorWatchCallback)})}getTextColor(){return this.__textColor}__processTextColor(){TcHmi.StyleProvider.processTextColor(this.__element,this.__textColor)}}BaseTemplate.TcHmiBreadcrumb=TcHmiBreadcrumb}(Controls.BaseTemplate||(Controls.BaseTemplate={}))}(TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiBreadcrumb","TcHmi.Controls.BaseTemplate",TcHmi.Controls.BaseTemplate.TcHmiBreadcrumb);