var TcHmi;!function(e){!function(t){!function(s){!function(i){let r;!function(e){e.detail="detail",e.quickLinks="quickLinks"}(r||(r={}));class n extends s.System.BaseRoomControl{constructor(e,s,i){super(e,s,i),this.__brightnessFeedbackReady=[],this.__useCurrentBrightness=!1,this.__waitingForBrightnessFeedback=!1,this.__uiFinishedHandler=(e,s)=>{s instanceof t.Components.Slider?this.__brightnessSlider&&this.writeBrightnessToPlc(this.__brightnessSlider.getValue()):s instanceof t.Components.Checkbox&&this.__brightnessSwitch&&this.writeBrightnessToPlc(this.__brightnessSwitch.getState())}}__previnit(){null==this.__baFc&&(this.__baFc=new n.Icon(this.__id+"-ba-fc",this)),super.__previnit(),this.__element.append(this.__baFc.getElement()),this.baInterfaceHandler.baInterfaceDefinition=n.BaInterfaceDef,this.setBaInterfaceSymbolNames(n.BaInterfaceSymbolNames),void 0===this.__attrHandler.readOnly&&this.setReadOnly(!1)}__init(){super.__init()}__attach(){super.__attach(),this.__baFc.eventHandler.register(t.Components.Button.ButtonEvents.onDoublePressed,(()=>{if(!0!==this.__baFc.getReadOnly())if("number"==typeof this.__attrHandler.brightness){let e=0;e=this.__attrHandler.brightness===n.MaximumBrightness?n.MinimumBrightness:n.MaximumBrightness,this.writeBrightnessToPlc(e)}else this.writeBrightnessToPlc(!this.__attrHandler.brightness)})),this.__baFc.setBrightness(null!=this.__attrHandler.brightnessFeedback?this.__attrHandler.brightnessFeedback:this.__attrHandler.brightness)}__detach(){super.__detach()}destroy(){this.__keepAlive||(null!=this.__destroyOnBrightnessSliderChanged&&this.__destroyOnBrightnessSliderChanged(),null!=this.__destroyOnBrightnessSliderUIFinised&&this.__destroyOnBrightnessSliderUIFinised(),null!=this.__destroyOnBrightnessSwitchUIFinised&&this.__destroyOnBrightnessSwitchUIFinised(),this.__brightnessSlider?.destroy(),this.__brightnessSwitch?.destroy(),super.destroy())}__processChangedBrightness(e){if(this.__useCurrentBrightness=!0,this.__waitingForBrightnessFeedback=!0,this.setBrightness(e),null!=this.__attrHandler.brightnessFeedback&&this.__attrHandler.brightness!=this.__attrHandler.brightnessFeedback){let e=()=>{this.__brightnessFeedbackReady.forEach((e=>e())),this.__brightnessFeedbackReady=[],this.setBrightness(this.__attrHandler.brightnessFeedback)},s=this.logger.logPerformance(t.Logger.Severity.debug,"Brightness feedback response."),r=()=>{s()};this.__brightnessFeedbackReady.push(this.busyHandler.setBusy("Waiting for BrightnessFeedback",{cbOnTimeout:e,cbOnReady:r,showIndicator:i.showBusyIndicator}))}}__createOrUpdateControls(){if(null==this.__attrHandler.brightness)return;let e=this.__attrHandler.brightness;switch(null!=this.__attrHandler.brightnessFeedback&&0==this.__useCurrentBrightness&&(e=this.__attrHandler.brightnessFeedback),this.__useCurrentBrightness=!1,typeof e){case"number":this.__brightnessSwitch&&(this.__removeControl(r.detail,this.__brightnessSwitch),delete this.__brightnessSwitch,null!=this.__destroyOnBrightnessSwitchUIFinised&&(this.__destroyOnBrightnessSwitchUIFinised(),delete this.__destroyOnBrightnessSwitchUIFinised)),null==this.__brightnessSlider&&(this.__brightnessSlider=new t.Components.Slider(this.__id+"-brightness-slider",this),this.__brightnessSlider.setShowScale(!1).setShowValue(!1).setKnobAppearance(t.Components.Slider.KnobAppearance.round).setShowBusyIndicator(i.showBusyIndicator).layoutHandler.setMaxHeight(10).setMinHeight(10),this.__addControl(r.detail,this.__brightnessSlider,1),this.__destroyOnBrightnessSliderUIFinised=this.__brightnessSlider.eventHandler.register(t.Components.Slider.SliderEvents.onUserInteractionFinished,this.__uiFinishedHandler)),this.__brightnessSlider.setMinValue(n.MinimumBrightness).setMaxValue(n.MaximumBrightness),0==n.showFeedbackInSlider?this.__brightnessSlider.setValue(e):(this.__brightnessSlider.setValue(this.__attrHandler.brightness),null!=this.__attrHandler.brightnessFeedback&&this.__brightnessSlider.setValueFeedback(this.__attrHandler.brightnessFeedback)),this.__createOrUpdateQuickLinks();let s=this.__getControl(r.quickLinks,n.__brightnessToggleName);s?.setState(e>n.MinimumBrightness);break;case"boolean":this.__brightnessSlider&&(this.__removeControl(r.detail,this.__brightnessSlider),delete this.__brightnessSlider,null!=this.__destroyOnBrightnessSliderUIFinised&&(this.__destroyOnBrightnessSliderUIFinised(),delete this.__destroyOnBrightnessSliderUIFinised),null!=this.__destroyOnBrightnessSliderChanged&&(this.__destroyOnBrightnessSliderChanged(),delete this.__destroyOnBrightnessSliderChanged)),null==this.__brightnessSwitch&&(this.__brightnessSwitch=new t.Components.Checkbox(this.__id+"-brightness-switch",this),this.__brightnessSwitch.setActiveText(null).setInactiveText(null).setAppearance(t.Components.Checkbox.Appearance.toggleSlider).setReadOnly(!1).layoutHandler.setMaxHeight(25).setMinHeight(25).setMaxWidth(50).setMinWidth(50),this.__addControl(r.detail,this.__brightnessSwitch,1),this.__destroyOnBrightnessSwitchUIFinised=this.__brightnessSwitch.eventHandler.register(t.Components.Checkbox.CheckboxEvents.onUserInteractionFinished,this.__uiFinishedHandler)),this.__element.removeClass("has-quick-links"),this.__removeAllControls(r.quickLinks),this.__brightnessSwitch.setState(e)}this.__baFc.setBrightness(e),this.__updateDisplay(e)}__createOrUpdateQuickLinks(){if(0==n.ShowQuickLinks)return;if(null==this.__attrHandler.lightColor)return;this.__element.hasClass("has-quick-links")||(this.__element.addClass("has-quick-links"),this.__addControls(r.quickLinks,[{type:t.Components.ComponentType.Checkbox,name:n.__brightnessToggleName,settings:{appearance:t.Components.Checkbox.Appearance.toggleSlider,readOnly:!1,layout:{maxHeight:25,minHeight:25,maxWidth:35,minWidth:35}},callback:e=>{this.writeBrightnessToPlc(1==e?n.MaximumBrightness:n.MinimumBrightness)}},{type:t.Components.ComponentType.Button,settings:{iconPath:t.Icons.RoomAutomation.Lamp2.path,iconHeight:90,iconHeightUnit:"%",iconWidth:90,iconWidthUnit:"%"},callback:()=>{this.writeBrightnessToPlc((n.MaximumBrightness-n.MinimumBrightness)/4+n.MinimumBrightness)}},{type:t.Components.ComponentType.Button,settings:{iconPath:t.Icons.RoomAutomation.Lamp2.path,iconHeight:90,iconHeightUnit:"%",iconWidth:90,iconWidthUnit:"%"},callback:()=>{this.writeBrightnessToPlc((n.MaximumBrightness-n.MinimumBrightness)/2+n.MinimumBrightness)}},{type:t.Components.ComponentType.Button,settings:{iconPath:t.Icons.RoomAutomation.Lamp2.path,iconHeight:90,iconHeightUnit:"%",iconWidth:90,iconWidthUnit:"%"},callback:()=>{this.writeBrightnessToPlc(3*(n.MaximumBrightness-n.MinimumBrightness)/4+n.MinimumBrightness)}}],2));let e=n.MaximumBrightness-n.MinimumBrightness;for(let s=1;s<this.__getControls(r.quickLinks).length;s++){let i=this.__getControls(r.quickLinks)[s],a=0;switch(s){case 1:a=e/4+n.MinimumBrightness;break;case 2:a=e/2+n.MinimumBrightness;break;case 3:a=3*e/4+n.MinimumBrightness}i.setAttributes({background:{imageColor:t.Color.getFadeColor(t.Color.RGBAColor.Black,n.MinimumBrightness,this.__attrHandler.lightColor,n.MaximumBrightness,a)}})}}__updateDisplay(e){null==e&&(e=0),this.__attrHandler.showValue?(this.__element.addClass("show-displays"),n.Icon.getBrightnessText(e,n.MinimumBrightness,n.MaximumBrightness,(e=>{this.__attrHandler.showValue?this.__baFc.textHandler.setText(e):this.__baFc.textHandler.setText(null)}))):(this.__element.removeClass("show-displays"),this.__baFc.textHandler.setText(null))}static processBaObject(e,t,i){null==t&&(t=n.BaInterfaceSymbolNames),s.System.BaseRoomControl.processBaObject(e,t,i);let r=e.baObjectHandler;if(null!=r&&r.baObject?.checkParams(n.BaInterfaceDef,t,e,!0)){let e=r.baObject.tryGetBaVariable("resetManual");i.processHasResetSymbol(null!=e);let t=r.baObject.tryGetBaVariable("cmdBrightness");if(null!=t){r.watchBaVariable(t,(e=>{i.processBrightness(e)}));let e=r.baObject.tryGetBaVariable("fdbBrightness");null!=e&&r.watchBaVariable(e,(e=>{i.processBrightnessFeedback(e)})),i.processHasBrightnessCmd(!0)}else{let e=r.baObject.tryGetBaVariable("fdbLightOn");null!=e&&r.watchBaVariable(e,(e=>{i.processBrightness(e),i.processBrightnessFeedback(e)})),i.processHasBrightnessCmd(!1)}r.baObject.tryGetBaVariable("cmdTemperature")}}static writeBrightnessToPlc(e,s){if(null!=e)if(s instanceof t.BA.BaBasicObject){let i=s.tryGetBaVariable("cmdBrightness");null!=i&&i.write(e,(e=>{t.Logger.checkServerResult(t.Logger.Severity.warn,e)&&s.tryGetBaVariable("setCmdBrightness")?.write(!0,(e=>t.Logger.checkServerResult(t.Logger.Severity.warn,e)))}))}else s instanceof t.BaInterfaceHandler&&s.hasSubSymbol("cmdBrightness")&&s.writeSubSymbol("cmdBrightness",e).then((e=>{t.Logger.checkServerResult(t.Logger.Severity.warn,e)&&s.hasSubSymbol("setCmdBrightness")&&s.writeSubSymbol("setCmdBrightness",!0).then((e=>{t.Logger.checkServerResult(t.Logger.Severity.warn,e)}))}))}writeBrightnessToPlc(e){1!=this.busyHandler.getIsBusy()&&null!=e&&(null==this.baInterfaceHandler.baInterfaceSymNames&&(this.baInterfaceHandler.baInterfaceSymNames=n.BaInterfaceSymbolNames),this.baObjectHandler.baObject?.checkParams(n.BaInterfaceDef,this.baInterfaceHandler.baInterfaceSymNames)&&n.writeBrightnessToPlc(e,this.baObjectHandler.baObject),null!=this.baInterfaceHandler.getBaInterfaceSym()&&n.writeBrightnessToPlc(e,this.baInterfaceHandler),this.__processChangedBrightness(e))}static resetManualToPlc(e){e instanceof t.BA.BaBasicObject?e.tryWriteBaVariableValue("resetManual",!0):e instanceof t.BaInterfaceHandler&&e.hasSubSymbol("resetManual")&&e.writeSubSymbol("resetManual",!0)}resetManualToPlc(){null==this.baInterfaceHandler.baInterfaceSymNames&&(this.baInterfaceHandler.baInterfaceSymNames=n.BaInterfaceSymbolNames),this.baObjectHandler.baObject?.checkParams(n.BaInterfaceDef,this.baInterfaceHandler.baInterfaceSymNames)&&n.resetManualToPlc(this.baObjectHandler.baObject),null!=this.baInterfaceHandler.getBaInterfaceSym()&&n.resetManualToPlc(this.baInterfaceHandler)}static getPriorityDisplayIcon(e){if(null==e)return t.Logger.warn("No priority passed."),null;let s=n.PriorityIcons.get(e);return null==s?null:s}getPriorityIcon(e){return n.getPriorityDisplayIcon(e)}static getIsLocked(e){return!!s.System.BaseRoomControl.getIsLocked(e)||null!=e.priority&&(e.priority<n.PriorityLockThreshold&&0!=e.priority)}getIsLocked(){return n.getIsLocked(this.__attrHandler)}static isManualPriority(e){return e===n.PriorityManual}hasManualPriority(){return n.isManualPriority(this.__attrHandler.priority)}setBaObject(e){return this.baObjectHandler.setBaObject(e),this}getBaObject(){return this.baObjectHandler.baObject}setAttributes(e){return super.setAttributes(e),void 0!==e.brightness&&this.setBrightness(e.brightness),void 0!==e.brightnessFeedback&&this.setBrightnessFeedback(e.brightnessFeedback),void 0!==e.lightColor&&this.setLightColor(e.lightColor),void 0!==e.displayMode&&this.setDisplayMode(e.displayMode),void 0!==e.showValue&&this.setShowValue(e.showValue),this}getAttributes(){return this.__attrHandler}setBaInterface(e){return super.setBaInterface(e),this.baInterfaceHandler.setBaInterfaceSym(e,(()=>{n.processBaInterface(this,{processError:e=>this.setError(e),processPriority:e=>this.setPriority(e),processHasBrightnessCmd:e=>this.__processIsControllable(e),processBrightness:e=>this.setBrightness(e),processBrightnessFeedback:e=>this.setBrightnessFeedback(e),processHasResetSymbol:e=>{this.__hasResetSymbol=e,this.__processPriority()}})})),this}setBrightness(t){let s=null;if(null!=t)switch(typeof t){case"boolean":case"number":s=t;break;default:s=e.ValueConverter.toNumber(t),null==s&&(s=e.ValueConverter.toBoolean(t))}return null==s&&(s=this.getAttributeDefaultValueInternal("Brightness")),s===this.__attrHandler.brightness||(this.__attrHandler.brightness=s,this.__processBrightness(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Brightness"}),e.EventProvider.raise(this.__id+".onBrightnessChanged")),this}__processBrightness(){this.__createOrUpdateControls()}getBrightness(){return this.__attrHandler.brightness}setBrightnessFeedback(t){let s=null;if(null!=t)switch(typeof t){case"boolean":case"number":s=t;break;default:s=e.ValueConverter.toNumber(t),null==s&&(s=e.ValueConverter.toBoolean(t))}if(null==s&&(s=this.getAttributeDefaultValueInternal("BrightnessFeedback")),s===this.__attrHandler.brightnessFeedback)return this;if(this.__attrHandler.brightnessFeedback=s,null!=this.__attrHandler.brightnessFeedback){if(1==this.__waitingForBrightnessFeedback&&this.__attrHandler.brightnessFeedback!=this.__attrHandler.brightness)return this;this.__processBrightnessFeedback(),this.__brightnessFeedbackReady.forEach((e=>e())),this.__brightnessFeedbackReady=[],this.__waitingForBrightnessFeedback=!1,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"BrightnessFeedback"})}return this}__processBrightnessFeedback(){this.__createOrUpdateControls()}getBrightnessFeedback(){return this.__attrHandler.brightnessFeedback}setLightColor(s){let i=e.ValueConverter.toObject(s);return null==i&&(i=this.getAttributeDefaultValueInternal("LightColor")),null!=i&&!t.Color.isSolidColor(i)||void 0===i||i===this.__attrHandler.lightColor||(null!=i&&e.isSolidColor(i)&&(i=t.Color.RGBAColor.fromSolidColor(i)),null==i||i instanceof t.Color.RGBAColor||(i=new t.Color.RGBAColor(i)),this.__attrHandler.lightColor=i,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LightColor"}),this.__processLightColor()),this}__processLightColor(){this.__baFc.setLightColor(this.__attrHandler.lightColor),this.__createOrUpdateControls()}getLightColor(){return this.__attrHandler.lightColor?.toSolidColor()}setDisplayMode(t){let s=e.ValueConverter.toNumber(t);return null==s&&(s=this.getAttributeDefaultValueInternal("DisplayMode")),s===this.__attrHandler.displayMode||(this.__attrHandler.displayMode=s,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"DisplayMode"}),this.__processDisplayMode()),this}__processDisplayMode(){this.__baFc.setDisplayMode(this.__attrHandler.displayMode)}getDisplayMode(){return this.__attrHandler.displayMode}setShowValue(t){let s=e.ValueConverter.toBoolean(t);return null==s&&(s=this.getAttributeDefaultValueInternal("ShowValue")),s===this.__attrHandler.showValue||(this.__attrHandler.showValue=s,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowValue"}),this.__processShowValue()),this}__processShowValue(){this.__createOrUpdateControls()}getShowValue(){return this.__attrHandler.showValue}processBaObject(){super.processBaObject(),n.processBaObject(this,this.baInterfaceHandler.baInterfaceSymNames,{processError:e=>this.setError(e),processPriority:e=>this.setPriority(e),processHasBrightnessCmd:e=>this.__processIsControllable(e),processBrightness:e=>this.setBrightness(e),processBrightnessFeedback:e=>this.setBrightnessFeedback(e),processHasResetSymbol:e=>{this.__hasResetSymbol=e,this.__processPriority()}})}static processBaInterface(e,t){s.System.BaseRoomControl.processBaInterface(e,t),t.processHasResetSymbol(e.baInterfaceHandler.hasSubSymbol("resetManual")),e.baInterfaceHandler.hasSubSymbol("cmdBrightness")?(e.baInterfaceHandler.watchSubSymbol("cmdBrightness",(e=>{t.processBrightness(e)})),e.baInterfaceHandler.hasSubSymbol("fdbBrightness")&&e.baInterfaceHandler.watchSubSymbol("fdbBrightness",(e=>{t.processBrightnessFeedback(e)})),t.processHasBrightnessCmd(!0)):(e.baInterfaceHandler.watchSubSymbol("fdbLightOn",(e=>{t.processBrightness(e),t.processBrightnessFeedback(e)})),t.processHasBrightnessCmd(!1)),e.baInterfaceHandler.hasSubSymbol("cmdTemperature")}}n.showFeedbackInSlider=!1,n.__brightnessToggleName="brightness-toggle",i.Light=n,function(i){let r,n;i.BaInterfaceDef={...s.System.BaseRoomControl.BaInterfaceDef,fdbLightOn:{type:"boolean"},resetManual:{type:"boolean",optional:!0},cmdBrightness:{type:"number",optional:!0},setCmdBrightness:{type:"boolean",optional:!0},fdbBrightness:{type:"number",optional:!0},cmdTemperature:{type:"number",optional:!0},setCmdTemperature:{type:"boolean",optional:!0},fdbTemperature:{type:"number",optional:!0}},i.BaInterfaceSymbolNames={...s.System.BaseRoomControl.BaInterfaceSymbolNames,fdbLightOn:{symbolName:"bLightOn_Out"},resetManual:{symbolName:"bSetCtrlMod_In"},cmdBrightness:{symbolName:"fSetLightValueMan_In"},setCmdBrightness:{symbolName:"bSetLightValueMan_In"},fdbBrightness:{symbolName:"fLightValue_Out"},cmdTemperature:{symbolName:"fSetLightTemperatureMan_In"},setCmdTemperature:{symbolName:"bSetLightTemperatureMan_In"},fdbTemperature:{symbolName:"fLightTemperature_Out"}},function(e){e[e.sliderHorizontal=0]="sliderHorizontal"}(r=i.ControlType||(i.ControlType={})),function(e){e[e.none=0]="none",e[e.fire=1]="fire",e[e.communicationError=2]="communicationError",e[e.burglary=3]="burglary",e[e.maintenance=4]="maintenance",e[e.cleaning=8]="cleaning",e[e.nightWatch=9]="nightWatch",e[e.simple=12]="simple",e[e.manual=13]="manual",e[e.automaticLight=14]="automaticLight",e[e.scene1=18]="scene1",e[e.scene2=19]="scene2",e[e.scene3=20]="scene3"}(n=i.Priority||(i.Priority={})),i.LightOffColor=t.Color.RGBAColor.Black,i.ShowQuickLinks=!1,i.MinimumBrightness=0,i.MaximumBrightness=100,i.PriorityIcons=new Map([[n.fire,t.Icons.convertIIconDataToIIconAttributes({...t.Icons.Building.FireAlarm,color:t.Color.RGBAColor.Red})],[n.communicationError,t.Icons.convertIIconDataToIIconAttributes({...t.Icons.Events.Flag.Fault,color:t.Color.RGBAColor.Red})],[n.burglary,t.Icons.convertIIconDataToIIconAttributes({...t.Icons.Building.BurglarAlarm,color:t.Color.RGBAColor.Red})],[n.maintenance,t.Icons.convertIIconDataToIIconAttributes({...t.Icons.Building.Maintenance,color:t.Color.RGBAColor.DarkOrange})],[n.cleaning,t.Icons.convertIIconDataToIIconAttributes({...t.Icons.Building.Cleaning,color:t.Color.RGBAColor.Yellow})],[n.nightWatch,t.Icons.convertIIconDataToIIconAttributes({...t.Icons.Building.NightWatch,color:t.Color.RGBAColor.Blue})],[n.manual,t.Icons.convertIIconDataToIIconAttributes({...t.Icons.RoomAutomation.Manual,color:t.Color.RGBAColor.DarkOrange})],[n.automaticLight,t.Icons.convertIIconDataToIIconAttributes({...t.Icons.RoomAutomation.Automatic,color:t.Color.RGBAColor.TcHmiGreen})]]),i.PriorityLockThreshold=n.simple,i.PriorityManual=n.manual;class a extends t.Components.Button{constructor(e,t){super(e,t),this.__element.addClass("light-icon"),this.setDisplayMode(a.DisplayMode.lightBulb),this.iconHandler.setIconHeight(90,"%"),this.iconHandler.setIconWidth(90,"%")}__attach(){this.__isAttached||(this.__destroyersToCallOnDetach.push(e.EventProvider.register(t.TcHmiEvents.onThemeDataChanged,(()=>{this.__animateBrightness()}))),super.__attach())}__detach(){this.__isAttached&&super.__detach()}destroy(){super.destroy()}__animateBrightness(){if(null==this.__attrHandler.lightColor)return;let e=t.Color.RGBAColor.Red;if(null!=this.__attrHandler.brightness)if("number"==typeof this.__attrHandler.brightness){let s=100/(i.MaximumBrightness-i.MinimumBrightness)*(this.__attrHandler.brightness-i.MinimumBrightness);s<50&&s>0&&(s=50),e=t.Color.getFadeColor(i.LightOffColor,0,this.__attrHandler.lightColor,100,s)}else e=!0===this.__attrHandler.brightness?this.__attrHandler.lightColor:i.LightOffColor;this.__attrHandler.displayMode===a.DisplayMode.lightBulb||this.__attrHandler.displayMode===a.DisplayMode.lightBulbFilled?(this.iconHandler.setIconColor(e,300),this.backgroundStyler.setColor(null,0)):(this.backgroundStyler.setColor(e,200),this.iconHandler.setIconColor(null))}static getBrightnessText(e,s,i,r){if(null!=e&&null!=s&&null!=i&&"number"==typeof e)r(t.Helper.Number.toPercentage(e,s,i).toFixed(0)+" %");else if(null!=e&&null!=s&&null!=i&&"boolean"==typeof e){let s=e?t.Locale.LangKey.On:t.Locale.LangKey.Off;t.Locale.Localization.watchText(s,(e=>{t.Logger.checkServerResult(t.Logger.Severity.warn,e)&&null!=e.text&&r(e.text)}))}else r("?")}setAttributes(e){return super.setAttributes(e),void 0!==e.brightness&&this.setBrightness(e.brightness),void 0!==e.lightColor&&this.setLightColor(e.lightColor),void 0!==e.displayMode&&this.setDisplayMode(e.displayMode),this}getAttributes(){return this.__attrHandler.getRef()}setBrightness(e){return this.__attrHandler.checkAttribute(e,"brightness",{validator:["boolean","number"]})?(this.__attrHandler.brightness=e,this.__processBrightness(),this):this}__processBrightness(){this.__animateBrightness()}getBrightness(){return this.__attrHandler.brightness}setLightColor(e){return this.__attrHandler.checkColorAttribute(e,"lightColor")?(this.__attrHandler.lightColor=e,this.__processLightColor(),this):this}__processLightColor(){this.__animateBrightness()}getLightColor(){return this.__attrHandler.lightColor}setDisplayMode(e){return this.__attrHandler.checkAttribute(e,"displayMode",{validator:"number"})?(this.__attrHandler.displayMode=e,this.__processDisplayMode(),this):this}__processDisplayMode(){switch(this.__attrHandler.displayMode){case a.DisplayMode.lightBulb:this.__element.removeClass("filled-display-mode"),this.iconHandler.setIcon(t.Icons.RoomAutomation.Lamp2.path,!0),this.__legendIconHandler.icon=t.Icons.convertIIconDataToIIconAttributes(t.Icons.RoomAutomation.Lamp2),this.__isAttached&&this.__legendIconHandler.show();break;case a.DisplayMode.lightBulbFilled:this.__element.removeClass("filled-display-mode"),this.iconHandler.setIcon(t.Icons.RoomAutomation.Lamp.path,!0),this.__legendIconHandler.icon=t.Icons.convertIIconDataToIIconAttributes(t.Icons.RoomAutomation.Lamp),this.__isAttached&&this.__legendIconHandler.show();break;default:this.iconHandler.setIcon(null),this.__element.addClass("filled-display-mode"),this.__legendIconHandler.hide()}this.__animateBrightness()}getDisplayMode(){return this.__attrHandler.displayMode}__processReadOnly(){super.__processReadOnly(),!0===this.__attrHandler.readOnly?this.__element.removeClass("button"):this.__element.addClass("button")}__updateLegendIcon(){}}i.Icon=a,function(e){let t;!function(e){e[e.lightBulb=0]="lightBulb",e[e.lightBulbFilled=1]="lightBulbFilled",e[e.filled=2]="filled"}(t=e.DisplayMode||(e.DisplayMode={}))}(a=i.Icon||(i.Icon={}))}(n=i.Light||(i.Light={}))}(s.RoomAutomation||(s.RoomAutomation={}))}(t.Controls||(t.Controls={}))}(e.BuildingAutomation||(e.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("Light","TcHmi.BuildingAutomation.Controls.RoomAutomation",TcHmi.BuildingAutomation.Controls.RoomAutomation.Light),TcHmi.EventProvider.register(TcHmi.BuildingAutomation.TcHmiEvents.onThemeDataChanged,(()=>{"Base-Dark"===TcHmi.Theme.get()?TcHmi.BuildingAutomation.Controls.RoomAutomation.Light.LightOffColor=TcHmi.BuildingAutomation.Color.RGBAColor.Gray:TcHmi.BuildingAutomation.Controls.RoomAutomation.Light.LightOffColor=TcHmi.BuildingAutomation.Color.RGBAColor.Black}));