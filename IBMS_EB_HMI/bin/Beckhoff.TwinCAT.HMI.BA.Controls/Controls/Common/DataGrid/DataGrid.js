var TcHmi;!function(t){!function(e){!function(n){!function(n){class o extends t.Controls.Beckhoff.TcHmiDatagrid{constructor(t,n,s){super(t,n,s),this.__eventDestroyFunctions=[],this.__controlCnt={base:0,eventIcons:0},this.logger=new e.Logger({name:this.__id}),this.childrenHandler=new e.Components.BaseNode.ChildrenHandler(this),this.__controlInteractionHandler=(t,n)=>{if(1==n.getReadOnly())return;let s,i=Number(n.getElement()[0].dataset.row),r=Number(n.getElement()[0].dataset.column),l=n.getElement().parent().parent()[0],a=this.getSrcColumn()[r];switch(a.type){case o.ControlType.ToggleButton:n instanceof e.Components.ToggleButton&&(s=n.getToggleState());break;case o.ControlType.DateTimeField:n instanceof e.Components.DateTimeField&&(s=n.getDate());break;case o.ControlType.Combobox:n instanceof e.Components.Combobox&&(s=n.getSelectedValue());break;case o.ControlType.InputBox:n instanceof e.Components.InputBox&&(s=n.getValue());break;case o.ControlType.Checkbox:n instanceof e.Components.Checkbox&&(s=n.getState());break;case o.ControlType.Slider:n instanceof e.Components.Slider&&(s=n.getValue())}if(void 0!==s){let t=this.__modifySrcData(s,i,r,l);t&&t.needSorting&&(this.__filterAndSort(),this.__updateTable(0))}let c=a;c.internalCallback&&(c.settings||(c.settings={}),c.settings.callbackParams={columnData:this.__data?.data[i][a.name],rowData:this.__data?.data[i]},c.internalCallback())}}__previnit(){super.__previnit()}__init(){super.__init(),null!=this.__rowHeight&&this.__element.css("--tchmi-ba-data-grid-row-height",this.__rowHeight+"px")}__attach(){super.__attach(),this.__propertyChangedDf=t.EventProvider.register(this.__id+".onPropertyChanged",((t,e)=>{null!=e.propertyName&&"RowHeight"===e.propertyName&&null!=this.__rowHeight&&this.__element.css("--tchmi-ba-data-grid-row-height",this.__rowHeight+"px")}))}__detach(){super.__detach(),this.__propertyChangedDf&&this.__propertyChangedDf()}destroy(){if(!this.__keepAlive){for(let t of this.childrenHandler.getChildren().values())t.destroy();super.destroy()}}__fillCell(t,n,s){if(o.isColumn(n)){let i;switch(super.__fillCell(t,{control:"",label:n.label,name:n.name,width:n.width,widthUnit:n.widthUnit},null),null==n.settings&&(n.settings={}),null==n.settings.textAttributes&&(n.settings.textAttributes={}),void 0!==n.textColor&&void 0===n.settings.textAttributes.color&&(n.settings.textAttributes.color=e.Color.RGBAColor.fromSolidColor(n.textColor)),void 0!==n.editable&&void 0===n.settings.readOnly&&(n.settings.readOnly=!n.editable),void 0!==n.horizontalAlignment&&void 0===n.settings.textAttributes.horizontalAlignment&&(n.settings.textAttributes.horizontalAlignment=n.horizontalAlignment),void 0!==n.horizontalAlignment&&void 0===n.settings.textAttributes.horizontalAlignment&&(n.settings.textAttributes.horizontalAlignment=n.horizontalAlignment),n.type!=o.ControlType.Combobox&&n.type!=o.ControlType.InputBox&&t.setAttribute("tabindex","0"),n.type){case o.ControlType.Button:case o.ControlType.ToggleButton:case o.ControlType.DateTimeField:case o.ControlType.Combobox:case o.ControlType.InputBox:case o.ControlType.Checkbox:case o.ControlType.Slider:case o.ControlType.Textblock:case o.ControlType.Icon:if(!o.isColumn(n))throw new Error("Invalid column definition!");let r=t.getElementsByClassName("tchmi-ba-base")[0];if(r&&(i=this.childrenHandler.getChildren().get(r.id)),!i){if(!e.Components.ControlContainer.isIControlOptions(n))throw new Error("Invalid column definition!");i=e.Components.ControlContainer.createControl(this.__id+"-base-"+this.__controlCnt.base,n,this),$(t).append(i.getElement()),this.__controlCnt.base++}switch(i.getElement()[0].dataset.row=t.dataset.row,i.getElement()[0].dataset.column=t.dataset.column,n.type){case o.ControlType.Button:i instanceof e.Components.Button&&this.__eventDestroyFunctions.push(i.eventHandler.register(e.Components.Button.ButtonEvents.onPressed,this.__controlInteractionHandler));break;case o.ControlType.ToggleButton:i instanceof e.Components.ToggleButton&&(this.__eventDestroyFunctions.push(i.eventHandler.register(e.Components.ToggleButton.ToggleButtonEvents.onToggleStateChanged,this.__controlInteractionHandler)),"boolean"==typeof s&&i.setToggleState(s));break;case o.ControlType.DateTimeField:i instanceof e.Components.DateTimeField&&(this.__eventDestroyFunctions.push(i.eventHandler.register(e.Components.DateTimeField.DateTimeFieldEvents.onUserInteractionFinished,this.__controlInteractionHandler)),s instanceof Date?i.setDate(s):"string"==typeof s&&i.setDate(new Date(s)));break;case o.ControlType.Combobox:i instanceof e.Components.Combobox&&(this.__eventDestroyFunctions.push(i.eventHandler.register(e.Components.Combobox.ComboboxEvents.onUserInteractionFinished,this.__controlInteractionHandler)),"number"==typeof s&&i.setSelectedValue(s));break;case o.ControlType.InputBox:i instanceof e.Components.InputBox&&(this.__eventDestroyFunctions.push(i.eventHandler.register(e.Components.InputBox.InputBoxEvents.onUserInteractionFinished,this.__controlInteractionHandler)),"number"!=typeof s&&"string"!=typeof s||i.setValue(s));break;case o.ControlType.Checkbox:i instanceof e.Components.Checkbox&&(this.__eventDestroyFunctions.push(i.eventHandler.register(e.Components.Checkbox.CheckboxEvents.onUserInteractionFinished,this.__controlInteractionHandler)),"boolean"==typeof s&&i.setState(s));break;case o.ControlType.Slider:i instanceof e.Components.Slider&&(this.__eventDestroyFunctions.push(i.eventHandler.register(e.Components.Slider.SliderEvents.onUserInteractionFinished,this.__controlInteractionHandler)),"number"==typeof s&&i.setValue(s));break;case o.ControlType.Textblock:i instanceof e.Components.Textblock&&("string"==typeof s||"number"==typeof s)&&i.textHandler.setText(s.toString());break;case o.ControlType.Icon:i instanceof e.Components.Icon&&"string"==typeof s&&(void 0===n.settings.useSVG&&(n.settings.useSVG=!0),void 0===n.settings.iconWidth&&i.iconHandler.setIconWidth(100,"%"),void 0===n.settings.iconHeight&&i.iconHandler.setIconHeight(100,"%"),i.iconHandler.setIcon(s,n.settings.useSVG))}n.formatEx&&n.formatEx(s,i);break;case o.ControlType.EventIcon:if(null!=s&&null!=s.t&&null!=s.s){let n,o=t.getElementsByClassName("event-icon")[0];o&&(n=this.childrenHandler.getChildren().get(o.id)),n||(n=new e.Components.EventIcon(this.__id+"-event-icon-"+this.__controlCnt.eventIcons,this),$(t).append(n.getElement()),this.__controlCnt.eventIcons++),n.setEventState(s.s).setEventCondition(s.t).setReadOnly(!0),i=n}else this.logger.debug(`${this.__id}: Invalid value was set for SrcColumnDataType event!`,s)}}else super.__fillCell(t,n,s)}__setRowClasses(t,e){if(super.__setRowClasses(t,e),!this.__data)return;let n=this.__data.data[e];n&&this.__rowClassesProviderFunc&&this.__rowClassesProviderFunc(t,n)}setBaParent(t){this.__baParent=t}getBaParent(){return this.__baParent}getCurrentRows(){return this.__elementDataTableBody.find("tr")}removeAllLocalStorage(){window.localStorage.removeItem("TCHMI_TCHMIDATAGRID_USERPREFERENCES_"+this.__id)}setSrcColumn(t){let e=null;if(null!=t)if(t instanceof Array){e=[];for(let n=0;n<t.length;n++){let o={...t[n],control:"TextBlock"};e.push(o)}}else e=t;super.setSrcColumn(e)}__processSrcColumn(){if(this.childrenHandler.getChildCount()>0)for(let t of this.childrenHandler.getChildren().values())t.destroy(),this.childrenHandler.removeChild(t);super.__processSrcColumn()}getSrcColumn(){return this.__srcColumn}setRowClassesProvider(t){"function"==typeof t?this.__rowClassesProviderFunc=t:(super.setRowClassesProvider(t),null==t&&delete this.__rowClassesProviderFunc)}}n.DataGrid=o,function(t){let n;!function(t){t[t.Invalid=-1]="Invalid",t[t.Button=0]="Button",t[t.ToggleButton=1]="ToggleButton",t[t.Combobox=2]="Combobox",t[t.Checkbox=3]="Checkbox",t[t.InputBox=4]="InputBox",t[t.DateTimeField=5]="DateTimeField",t[t.Slider=6]="Slider",t[t.Textblock=7]="Textblock",t[t.Icon=8]="Icon",t[t.EventIcon=9]="EventIcon"}(n=t.ControlType||(t.ControlType={})),t.isColumn=function(t){return e.Components.ControlContainer.isIControlOptions(t)}}(o=n.DataGrid||(n.DataGrid={}))}(n.Common||(n.Common={}))}(e.Controls||(e.Controls={}))}(t.BuildingAutomation||(t.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("DataGrid","TcHmi.BuildingAutomation.Controls.Common",TcHmi.BuildingAutomation.Controls.Common.DataGrid);