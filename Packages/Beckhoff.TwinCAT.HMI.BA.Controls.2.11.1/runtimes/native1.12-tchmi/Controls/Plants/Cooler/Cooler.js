var TcHmi;!function(e){!function(t){!function(o){!function(n){class s extends o.System.BaseTemplate{constructor(e,o,n){super(e,o,n),this.__defaultBaTemplateDescription=s.BaTemplateDescription,this.__legendIconHandler=new t.Components.LegendIconHandler(t.Icons.convertIIconDataToIIconAttributes(t.Icons.HVAC.Cooler))}__previnit(){let n=$("<div>").addClass("connection flow"),s=$("<div>").addClass("connection return");this.__element.append([n,s]),this.__main=e.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Common.UiIcon",this.__id+"-main",null,this),null!=this.__main&&(this.__main.setIcon(t.Icons.HVAC.Cooler.path).getElement().addClass("main"),this.__element.append(this.__main.getElement())),this.__flowTempSensor=e.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Plants.SensorAnalog",this.__id+"-flow-temp-sensor",null,this),null!=this.__flowTempSensor&&(this.__flowTempSensor.setDisplayMode(o.System.Sensor.DisplayMode.temperature).setPinPosition(t.Position.right).setPinWidth(4).setDisplayPositionDesigner(t.Components.UiIcon.DisplayPosition.top).getElement().addClass("flow-temp-sensor"),this.__element.append(this.__flowTempSensor.getElement())),this.__returnTempSensor=e.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Plants.SensorAnalog",this.__id+"-return-temp-sensor",null,this),null!=this.__returnTempSensor&&(this.__returnTempSensor.setDisplayMode(o.System.Sensor.DisplayMode.temperature).setPinPosition(t.Position.left).setPinWidth(4).setDisplayPositionDesigner(t.Components.UiIcon.DisplayPosition.top).getElement().addClass("return-temp-sensor"),this.__element.append(this.__returnTempSensor.getElement())),this.__valve=e.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Plants.Valve",this.__id+"-valve",null,this),null!=this.__valve&&(this.__valve.setDisplayPositionDesigner(t.Components.UiIcon.DisplayPosition.left).getElement().addClass("valve"),this.__element.append(this.__valve.getElement())),super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),this.onResized(),this.__legendIconHandler.show()}__detach(){super.__detach(),this.__legendIconHandler.hide()}destroy(){this.__keepAlive||(this.__main?.destroy(),this.__flowTempSensor?.destroy(),this.__returnTempSensor?.destroy(),this.__valve?.destroy(),super.destroy())}onResized(){if(!this.__isAttached)return;let e=this.__element.width(),t=this.__element.children(".connection.flow").position().left,o=this.__element.children(".connection.return").position().left,s=this.__element.children(".connection.return").width();if(this.__flowTempSensor){let e=this.__flowTempSensor.getElement().width();this.__flowTempSensor.setPinConnection(t-e)}if(this.__returnTempSensor){let t=this.__returnTempSensor.getElement().width();this.__returnTempSensor.setPinConnection(e-o-s-t)}if(this.__valve){let e=this.__valve.getElement().position().left,t=this.__valve.getElement().width();null!=this.__attrHandler.valveDisplayMode&&this.__attrHandler.valveDisplayMode>=n.Valve.DisplayMode.threeDirection_0&&this.__attrHandler.valveDisplayMode<=n.Valve.DisplayMode.threeDirection_4?this.__valve.setConnections({right:o-e-t}):this.__valve.setConnections(null)}}setFlowPipeColor(t){let o=e.ValueConverter.toObject(t);return null==o&&(o=this.getAttributeDefaultValueInternal("FlowPipeColor")),tchmi_equal(o,this.__attrHandler.flowPipeColor)||(this.__attrHandler.flowPipeColor=o,this.__processFlowPipeColor(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"FlowPipeColor"})),this}__processFlowPipeColor(){this.__attrHandler.flowPipeColor&&(e.StyleProvider.processBackgroundColor(this.__element.children(".connection.flow"),this.__attrHandler.flowPipeColor),this.__flowTempSensor?.setConnectionColors(t.Color.RGBAColor.fromSolidColor(this.__attrHandler.flowPipeColor)))}getFlowPipeColor(){return this.__attrHandler.flowPipeColor}setReturnPipeColor(t){let o=e.ValueConverter.toObject(t);return null==o&&(o=this.getAttributeDefaultValueInternal("ReturnPipeColor")),tchmi_equal(o,this.__attrHandler.returnPipeColor)||(this.__attrHandler.returnPipeColor=o,this.__processReturnPipeColor(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ReturnPipeColor"})),this}__processReturnPipeColor(){this.__attrHandler.returnPipeColor&&(e.StyleProvider.processBackgroundColor(this.__element.children(".connection.return"),this.__attrHandler.returnPipeColor),this.__returnTempSensor?.setConnectionColors(t.Color.RGBAColor.fromSolidColor(this.__attrHandler.returnPipeColor)),this.__valve?.setConnectionColors(t.Color.RGBAColor.fromSolidColor(this.__attrHandler.returnPipeColor)))}getReturnPipeColor(){return this.__attrHandler.returnPipeColor}setDisplayModeValve(t){if(null==this.__valve)return this;let o=e.ValueConverter.toNumber(t);return null==o&&(o=this.getAttributeDefaultValueInternal("ValveDisplayMode")),tchmi_equal(o,this.__attrHandler.valveDisplayMode)||(this.__valve.setDisplayMode(o),this.__attrHandler.valveDisplayMode=o,this.__processDisplayModeValve(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ValveDisplayMode"})),this}__processDisplayModeValve(){this.onResized()}getDisplayModeValve(){return this.__attrHandler.valveDisplayMode}setShowFeedbackValve(e){return this.__valve?.setShowFeedback(e),this}getShowFeedbackValve(){return this.__valve?.getShowFeedback()}setShowSetpointValve(e){return this.__valve?.setShowSetpoint(e),this}getShowSetpointValve(){return this.__valve?.getShowSetpoint()}setSetpointSensorFlow(e){return this.__flowTempSensor?.setSetpointDesigner(e),this}setShowFeedbackSensorFlow(e){return this.__flowTempSensor?.setShowFeedback(e),this}getShowFeedbackSensorFlow(){return this.__flowTempSensor?.getShowFeedback()}setShowSetpointSensorFlow(e){return this.__flowTempSensor?.setShowSetpoint(e),this}getShowSetpointSensorFlow(){return this.__flowTempSensor?.getShowSetpoint()}setSetpointSensorReturn(e){return this.__returnTempSensor?.setSetpointDesigner(e),this}setShowFeedbackSensorReturn(e){return this.__returnTempSensor?.setShowFeedback(e),this}getShowFeedbackSensorReturn(){return this.__returnTempSensor?.getShowFeedback()}setShowSetpointSensorReturn(e){return this.__returnTempSensor?.setShowSetpoint(e),this}getShowSetpointSensorReturn(){return this.__returnTempSensor?.getShowSetpoint()}processBaObject(){if(super.processBaObject(),this.__main?.setBaObject(null),this.__flowTempSensor?.setBaObject(null),this.__returnTempSensor?.setBaObject(null),this.__valve?.setBaObject(null),null!=this.baObjectHandler.baObject&&this.baObjectHandler.baObject.checkTemplate(s.BaTemplateDefinition,this.baTemplateHandler.baBaTemplateDescription,this,!0)){if(this.__main?.setBaObject(this.baObjectHandler.baObject),this.__flowTempSensor){let e=this.baObjectHandler.baObject.getTemplateChild("tempFlow");e instanceof t.BA.BaView?(this.__flowTempSensor.baTemplateHandler.setBaTemplateDescriptionInternal(this.baTemplateHandler.baBaTemplateDescription.tempFlow.subTemplate),this.__flowTempSensor.setBaObject(e),this.__flowTempSensor.getIsAttached()||this.__element.append(this.__flowTempSensor.getElement())):(this.__flowTempSensor.setBaObject(null),this.__flowTempSensor.getIsAttached()&&this.__flowTempSensor.getElement().detach())}if(this.__returnTempSensor){let e=this.baObjectHandler.baObject.getTemplateChild("tempReturn");e instanceof t.BA.BaView?(this.__returnTempSensor.baTemplateHandler.setBaTemplateDescriptionInternal(this.baTemplateHandler.baBaTemplateDescription.tempReturn.subTemplate),this.__returnTempSensor.setBaObject(e),this.__returnTempSensor.getIsAttached()||this.__element.append(this.__returnTempSensor.getElement())):(this.__returnTempSensor.setBaObject(null),this.__returnTempSensor.getIsAttached()&&this.__returnTempSensor.getElement().detach())}if(this.__valve){let e=this.baObjectHandler.baObject.getTemplateChild("valve");e instanceof t.BA.BaView?(this.__valve.baTemplateHandler.setBaTemplateDescriptionInternal(this.baTemplateHandler.baBaTemplateDescription.valve.subTemplate),this.__valve.setBaObject(e),this.__valve.getIsAttached()||(this.__element.append(this.__valve.getElement()),this.onResized())):(this.__valve.setBaObject(null),this.__valve.getIsAttached()&&this.__valve.getElement().detach())}}}__processShowTags(){super.__processShowTags(),this.__attrHandler.showTags?(this.__main?.setShowTag(t.Components.UiIcon.DisplayPosition.top),this.__flowTempSensor?.setShowTag(s.TemperatureSensorTagPosition),this.__returnTempSensor?.setShowTag(s.TemperatureSensorTagPosition),this.__valve?.setShowTag(t.Components.UiIcon.DisplayPosition.left)):(this.__main?.setShowTag(null),this.__flowTempSensor?.setShowTag(null),this.__returnTempSensor?.setShowTag(null),this.__valve?.setShowTag(null))}}n.Cooler=s,function(e){e.BaTemplateDefinition={tempFlow:{subTemplate:n.SensorAnalog.BaTemplateDefinition,optional:!0},tempReturn:{subTemplate:n.SensorAnalog.BaTemplateDefinition,optional:!0},valve:{subTemplate:n.Valve.BaTemplateDefinition,optional:!0}},e.BaTemplateDescription={tempFlow:{identifier:"TFl",subTemplate:n.SensorAnalog.BaTemplateDescription},tempReturn:{identifier:"TRt",subTemplate:n.SensorAnalog.BaTemplateDescription},valve:{identifier:"Vlv",subTemplate:n.Valve.BaTemplateDescription_TwoPoint}},e.TemperatureSensorTagPosition=t.Components.UiIcon.DisplayPosition.bottom}(s=n.Cooler||(n.Cooler={}))}(o.Plants||(o.Plants={}))}(t.Controls||(t.Controls={}))}(e.BuildingAutomation||(e.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("Cooler","TcHmi.BuildingAutomation.Controls.Plants",TcHmi.BuildingAutomation.Controls.Plants.Cooler);