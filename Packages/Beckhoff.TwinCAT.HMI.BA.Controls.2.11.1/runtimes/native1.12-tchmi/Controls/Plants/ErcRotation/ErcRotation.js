var TcHmi;!function(t){!function(i){!function(e){!function(s){class n extends e.System.BaseTemplate{constructor(t,e,s){super(t,e,s),this.__defaultBaTemplateDescription=n.BaTemplateDescription,this.__legendIconHandler=new i.Components.LegendIconHandler(i.Icons.convertIIconDataToIIconAttributes(i.Icons.HVAC.Erc_rotation)),this.__diffPrssSwiLegendIconHandler=new i.Components.LegendIconHandler(i.Icons.convertIIconDataToIIconAttributes(i.Icons.HVAC.Pressure_s))}__previnit(){this.__diffPrssSwi=t.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Plants.SensorBinary",this.__id+"-diff-prss-swi",null,this),null!=this.__diffPrssSwi&&(this.__diffPrssSwi.setPinLayout(e.System.Sensor.PinLayout.parallel).setDisplayMode(e.System.Sensor.DisplayMode.pressure).setPinPosition(i.Position.bottom).setPinConnection(16).setPinExtension(76).setShowDisplays(!1).getElement().addClass("diff-prss-swi"),this.__element.append(this.__diffPrssSwi.getElement())),this.__main=t.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Common.UiIcon",this.__id+"-main",null,this),null!=this.__main&&(this.__main.setShowDisplays(!0).setIcon(i.Icons.HVAC.Erc_rotation.path).getElement().addClass("main"),this.__element.append(this.__main.getElement())),super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),this.__legendIconHandler.show(),this.__diffPrssSwi?.getIsAttached()&&this.__diffPrssSwiLegendIconHandler.show()}__detach(){super.__detach(),this.__legendIconHandler.hide(),this.__diffPrssSwiLegendIconHandler.hide()}destroy(){this.__keepAlive||(this.__main?.destroy(),this.__diffPrssSwi?.destroy(),super.destroy())}__processDisplaysData(){let t;this.__main?.setDisplaysData(null),this.__showSetpoint?(t=this.__main?.getDisplay(e.System.UiIconFdbStp.setpointDisplayName),null==t&&(t=this.__main?.addDisplay(e.System.UiIconFdbStp.setpointDisplayName,{position:this.__displayPosition,order:2,readOnly:!0,textAttributes:{fontWeight:"Bold",color:i.Color.RGBAColor.TcHmiBlue}})),this.__main?.updateDisplay(e.System.UiIconFdbStp.setpointDisplayName,{position:this.__displayPosition,baObject:this.__setpoint,value:null==this.__setpoint?"???":void 0})):this.__main?.removeDisplay(e.System.UiIconFdbStp.setpointDisplayName),this.__showFeedback?(t=this.__main?.getDisplay(e.System.UiIconFdbStp.setpointDisplayName),null==t&&(t=this.__main?.addDisplay(e.System.UiIconFdbStp.feedbackDisplayName,{position:this.__displayPosition,order:1,readOnly:!0,textAttributes:{fontWeight:"Bold"}})),this.__main?.updateDisplay(e.System.UiIconFdbStp.feedbackDisplayName,{position:this.__displayPosition,baObject:this.__feedback,value:null==this.__feedback?"???":void 0})):this.__main?.removeDisplay(e.System.UiIconFdbStp.feedbackDisplayName)}setDisplayPosition(i){let e=t.ValueConverter.toNumber(i);return null==e&&(e=this.getAttributeDefaultValueInternal("DisplayPosition")),tchmi_equal(e,this.__displayPosition)||(this.__displayPosition=e,this.__processDisplayPosition(),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"DisplayPosition"})),this}__processDisplayPosition(){if(null==this.__displayPosition)return;let t=this.__main?.getDisplays();if(null!=t)for(const i of t.keys())this.__main?.setDisplayPosition(i,this.__displayPosition)}getDisplayPosition(){return this.__displayPosition}setShowFeedbackErc(i){let e=t.ValueConverter.toBoolean(i);return null==e&&(e=this.getAttributeDefaultValueInternal("ShowFeedbackErc")),tchmi_equal(e,this.__showFeedback)||(this.__showFeedback=e,this.__processDisplaysData(),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowFeedbackErc"})),this}getShowFeedbackValve(){return this.__showFeedback}setShowSetpointErc(i){let e=t.ValueConverter.toBoolean(i);return null==e&&(e=this.getAttributeDefaultValueInternal("ShowSetpointErc")),tchmi_equal(e,this.__showSetpoint)||(this.__showSetpoint=e,this.__processDisplaysData(),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowSetpointErc"})),this}getShowSetpointErc(){return this.__showSetpoint}processBaObject(){if(super.processBaObject(),this.__main?.setBaObject(null),this.__diffPrssSwi?.setBaObject(null),this.__main?.setIsActive(!1),this.__feedback=null,this.__setpoint=null,this.__processDisplaysData(),null==this.baObjectHandler.baObject)return;let e=null;if(this.baObjectHandler.baObject.checkTemplate(n.BaTemplateDefinition,this.baTemplateHandler.baBaTemplateDescription,this,!0)){if(this.__main?.setBaObject(this.baObjectHandler.baObject),this.__diffPrssSwi){let t=this.baObjectHandler.baObject.getTemplateChild("diffPrssSwi");t?(this.__diffPrssSwi.setBaObject(t),this.__diffPrssSwi.getIsAttached()||(this.__diffPrssSwi.getElement().insertBefore(this.__main.getElement()),this.__diffPrssSwiLegendIconHandler.show())):this.__diffPrssSwi.getIsAttached()&&(this.__diffPrssSwi.getElement().detach(),this.__diffPrssSwiLegendIconHandler.hide())}e=this.baObjectHandler.baObject.getTemplateChild("command"),e&&this.__main?.baObjectHandler?.tryWatchChildrenBaVariable(e,i.BA.BaParameterId.ePresentValue,(i=>{let e=t.ValueConverter.toBoolean(i);null!=e&&this.__main?.setIsActive(e)})),this.__feedback=this.baObjectHandler.baObject.getTemplateChild("feedback"),this.__setpoint=this.baObjectHandler.baObject.getTemplateChild("setpoint"),this.__processDisplaysData()}}}s.ErcRotation=n,function(t){t.BaTemplateDefinition={diffPrssSwi:{optional:!0},feedback:{optional:!0},setpoint:{optional:!0},command:{optional:!0}},t.BaTemplateDescription={diffPrssSwi:{identifier:"DiffPrssSwi"},feedback:{identifier:"Motor::Fdb"},setpoint:{identifier:"Motor::Mdlt"},command:{identifier:"Motor::Cmd"}}}(n=s.ErcRotation||(s.ErcRotation={}))}(e.Plants||(e.Plants={}))}(i.Controls||(i.Controls={}))}(t.BuildingAutomation||(t.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("ErcRotation","TcHmi.BuildingAutomation.Controls.Plants",TcHmi.BuildingAutomation.Controls.Plants.ErcRotation);