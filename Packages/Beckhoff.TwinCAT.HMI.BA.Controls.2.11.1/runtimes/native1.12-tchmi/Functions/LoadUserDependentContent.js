var TcHmi;!function(e){!function(n){let t;!function(t){let r;function o(n,t){if(!(t instanceof Array))return void console.error("Passed user contents array is not an Array!",t);for(let e=0;e<t.length;e++)if("string"!=typeof t[e].content||"string"!=typeof t[e].userName)return void console.error("Passed user content does not match interface Interfaces.UserContent",t[e]);let r=e.Server.getCurrentUserConfig();if(!r)return void console.error("No user was logged in!");let o=r.name;if(!o)return void console.error("Current logged in user has no user name!");let i=t.find((e=>e.userName===o));i&&n.setTargetContent(i.content)}t.LoadUserDependentContent=function(t,i,s){t instanceof e.Controls.System.TcHmiRegion?s?(r||(r=e.EventProvider.register(t.getId()+".onTargetContentReplaced",(async()=>{try{let e=t.getTargetContent();if(null==e)throw new n.NullOrUndefinedVariableError("curContent");await n.Storage.UserData.saveLastContentAsync(e)}catch(e){n.BaseError.warn(e)}}))),t.setTargetContent(null),e.EventProvider.register(n.Server.BaSite.Events.onExtensionLoaded,(async e=>{try{e.destroy();const r=await n.Storage.UserData.loadLastContentAsync();null==r?o(t,i):t.setTargetContent(r)}catch(e){n.BaseError.warn(e)}}))):o(t,i):console.error("Passed host region is not a TcHmiRegion!",t)}}(t=n.Functions||(n.Functions={}))}(e.BuildingAutomation||(e.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Functions.registerFunctionEx("LoadUserDependentContent","TcHmi.BuildingAutomation.Functions",TcHmi.BuildingAutomation.Functions.LoadUserDependentContent);